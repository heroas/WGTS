#:kivy 1.0
#:import Toolbar kivymd.toolbar.Toolbar
#:import ThemeManager kivymd.theming.ThemeManager
#:import MDNavigationDrawer kivymd.navigationdrawer.MDNavigationDrawer
#:import NavigationLayout kivymd.navigationdrawer.NavigationLayout
#:import NavigationDrawerDivider kivymd.navigationdrawer.NavigationDrawerDivider
#:import NavigationDrawerToolbar kivymd.navigationdrawer.NavigationDrawerToolbar
#:import NavigationDrawerSubheader kivymd.navigationdrawer.NavigationDrawerSubheader
#:import MDCheckbox kivymd.selectioncontrols.MDCheckbox
#:import MDSwitch kivymd.selectioncontrols.MDSwitch
#:import MDList kivymd.list.MDList
#:import OneLineListItem kivymd.list.OneLineListItem
#:import TwoLineListItem kivymd.list.TwoLineListItem
#:import ThreeLineListItem kivymd.list.ThreeLineListItem
#:import OneLineAvatarListItem kivymd.list.OneLineAvatarListItem
#:import OneLineIconListItem kivymd.list.OneLineIconListItem
#:import OneLineAvatarIconListItem kivymd.list.OneLineAvatarIconListItem
#:import MDTextField kivymd.textfields.MDTextField
#:import MDSpinner kivymd.spinner.MDSpinner
#:import MDCard kivymd.card.MDCard
#:import MDSeparator kivymd.card.MDSeparator
#:import MDDropdownMenu kivymd.menu.MDDropdownMenu
#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import colors kivymd.color_definitions.colors
#:import SmartTile kivymd.grid.SmartTile
#:import MDSlider kivymd.slider.MDSlider
#:import MDTabbedPanel kivymd.tabs.MDTabbedPanel
#:import MDTab kivymd.tabs.MDTab
#:import MDProgressBar kivymd.progressbar.MDProgressBar
#:import MDAccordion kivymd.accordion.MDAccordion
#:import MDAccordionItem kivymd.accordion.MDAccordionItem
#:import MDAccordionSubItem kivymd.accordion.MDAccordionSubItem
#:import MDThemePicker kivymd.theme_picker.MDThemePicker
#:import MDBottomNavigation kivymd.tabs.MDBottomNavigation
#:import MDBottomNavigationItem kivymd.tabs.MDBottomNavigationItem
#:import gl Global
<Criterea_Selection>:
    name: 'criterea'
    BoxLayout:
        padding: 5

        MDSpinner:
            id: spinner
            size_hint: None, None
            size: dp(26), dp(26)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            active: False

        BoxLayout:
            size_hint: (.73,1)
            orientation: 'vertical'
            spacing: 5

            BoxLayout:
                orientation: 'vertical'
                padding: 10
                spacing: 5
                size_hint_y: 1.3

                MDLabel:
                    size_hint_y: .2
                    text: "GENRES"
                    font_style: 'Headline'
                    theme_text_color: 'Primary'

                MDCard:
                    size_hint: (.9,1)
                    GridLayout:
                        cols: 6
                        rows: 3
                        row_default_height: dp(50)
                        row_force_default: True
                        padding: 4
                        spacing: dp(4)

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.12, 'center_y': 0.9}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Action"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: act_chk
                                on_state: root.add_genre('Action') if act_chk.active else root.remove_genre('Action')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.12, 'center_y': 0.9}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Adventure"
                                size_hint_x: None
                                width: '60dp'
                            MDCheckbox:
                                id: adv_chk
                                on_state: root.add_genre('Adventure') if adv_chk.active else root.remove_genre('Adventure')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.22, 'center_y': 0.9}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Drama"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: drama_chk
                                on_state: root.add_genre('Drama') if drama_chk.active else root.remove_genre('Drama')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.32, 'center_y': 0.9}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Ecchi"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: ecchi_chk
                                on_state: root.add_genre('Ecchi') if ecchi_chk.active else root.remove_genre('Ecchi')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.42, 'center_y': 0.9}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Fantasy"
                                size_hint_x: None
                                width: '54dp'
                            MDCheckbox:
                                id: fantasy_chk
                                on_state: root.add_genre('Fantasy') if fantasy_chk.active else root.remove_genre('Fantasy')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.52, 'center_y': 0.9}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Horror"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: horror_chk
                                on_state: root.add_genre('Horror') if horror_chk.active else root.remove_genre('Horror')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.02, 'center_y': 0.83}
                            padding: '5dp'
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Comedy"
                                size_hint_x: None
                                width: '50dp'
                            MDCheckbox:
                                id: comedy_chk
                                on_state: root.add_genre('Comedy') if comedy_chk.active else root.remove_genre('Comedy')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            padding: '5dp'
                            pos_hint: {'x': 0.12, 'center_y': 0.83}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "SciFi"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: scifi_chk
                                on_state: root.add_genre('Sci-Fi') if scifi_chk.active else root.remove_genre('Sc-iFi')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.22, 'center_y': 0.83}
                            padding: '5dp'
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Romance"
                                size_hint_x: None
                                width: '60dp'
                            MDCheckbox:
                                id: roma_chk
                                on_state: root.add_genre('Romance') if roma_chk.active else root.remove_genre('Romance')

                        BoxLayout:
                            size_hint: None, None
                            size: '120dp', '50dp'
                            pos_hint: {'x': 0.32, 'center_y': 0.83}
                            padding: '5dp'
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Psychological"
                                size_hint_x: None
                                width: '80dp'
                            MDCheckbox:
                                id: psy_chk
                                on_state: root.add_genre('Psychological') if psy_chk.active else root.remove_genre('Psychological')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.42, 'center_y': 0.83}
                            padding: '5dp'
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Mystery"
                                size_hint_x: None
                                width: '54dp'
                            MDCheckbox:
                                id: mys_chk
                                on_state: root.add_genre('Mystery') if mys_chk.active else root.remove_genre('Mystery')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            padding: '5dp'
                            pos_hint: {'x': 0.52, 'center_y': 0.83}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Music"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: mus_chk
                                on_state: root.add_genre('Music') if mus_chk.active else root.remove_genre('Music')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.02, 'center_y': 0.76}
                            padding: '5dp'
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Mecha"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: mech_chk
                                on_state: root.add_genre('Mecha') if mech_chk.active else root.remove_genre('Mecha')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            padding: '5dp'
                            pos_hint: {'x': 0.12, 'center_y': 0.76}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Mahou Shojo"
                                size_hint_x: None
                                width: '60dp'
                            MDCheckbox:
                                id: mahou_chk
                                on_state: root.add_genre('Mahou Shojo') if mahou_chk.active else root.remove_genre('Mahou Shojo')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.22, 'center_y': 0.76}
                            padding: '5dp'
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Slice of Life"
                                size_hint_x: None
                                width: '60dp'
                            MDCheckbox:
                                id: sol_chk
                                on_state: root.add_genre('Slice of Life') if sol_chk.active else root.remove_genre('Slice of Life')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            pos_hint: {'x': 0.32, 'center_y': 0.76}
                            padding: '5dp'
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Sports"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: sports_chk
                                on_state: root.add_genre('Sports') if sports_chk.active else root.remove_genre('Sports')

                        BoxLayout:
                            size_hint: None, None
                            size: '110dp', '50dp'
                            pos_hint: {'x': 0.42, 'center_y': 0.76}
                            padding: '5dp'
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Supernatural"
                                size_hint_x: None
                                width: '74dp'
                            MDCheckbox:
                                id: supernat_chk
                                on_state: root.add_genre('Supernatural') if supernat_chk.active else root.remove_genre('Supernatural')

                        BoxLayout:
                            size_hint: None, None
                            size: '100dp', '50dp'
                            padding: '5dp'
                            pos_hint: {'x': 0.52, 'center_y': 0.76}
                            MDLabel:
                                font_style: 'Body1'
                                theme_text_color: 'Primary'
                                text: "Thriller"
                                size_hint_x: None
                                width: '40dp'
                            MDCheckbox:
                                id: thrill_chk
                                on_state: root.add_genre('Thriller') if thrill_chk.active else root.remove_genre('Thriller')

                                    #MDCheckbox:
                        #pos_hint: {'x': 0.9, 'center_y': 0.9}
                        #id: action_chk
                        #on_state: app.add_genre('Action') if action_chk.active else app.remove_genre('Action')



            BoxLayout:
                size_hint_y: .15
                BoxLayout:
                    size_hint_x: .2
                    pos_hint: {'center_x': 0.5, 'center_y': 0.9}
                    MDLabel:
                        id: first_or
                        text: "OR"
                        theme_text_color: 'Custom'
                        halign: 'center'

                    MDSwitch:
                        id: first_switch
                        size_hint:    None, None
                        size:        dp(36), dp(48)
                        pos_hint:    {'center_x': 0.75, 'center_y': 0.5}
                        _active:  root.first_switch_toggle('AND') if first_switch.active else root.first_switch_toggle('OR')
                    MDLabel:
                        id: first_and
                        text: "AND"
                        theme_text_color: 'Custom'
                        halign: 'center'

            BoxLayout:
                orientation: 'vertical'
                padding: 10
                spacing: 5
                MDLabel:
                    size_hint_y: .2
                    text: "RATING"
                    font_style: 'Headline'
                    theme_text_color: 'Primary'

                MDCard:
                    size_hint: 1,1
                    padding: 20
                    spacing: 10
                    orientation: 'vertical'

                    MDLabel:
                        id: rating_slider_percentage
                        text: str(int(round(rating_slider.value))) + '%'
                        font_style: 'Headline'
                        theme_text_color: 'Primary'
                        halign: 'center'
                    MDSlider:
                        id: rating_slider
                        min:0
                        max:100
                        value: 70

            BoxLayout:
                orientation: 'vertical'
                padding: 10
                spacing: 2
                MDLabel:
                    pos_hint: {'x': 0, 'center_y': 0.9}
                    text: "POPULARITY"
                    font_style: 'Headline'
                    theme_text_color: 'Primary'
                BoxLayout:
                    spacing: 20
                    MDRaisedButton:
                        pos_hint: {'x': 0.3, 'center_y': 0.9}
                        text: "Most Popular"
                        on_release: root.set_popularity('Most')
                        halign: 'center'
                    MDRaisedButton:
                        pos_hint: {'x': 0.6, 'center_y': 0.9}
                        text: "Top 3"
                        halign: 'center'
                        on_release: root.set_popularity('3')
                    MDRaisedButton:
                        pos_hint: {'x': 0.9, 'center_y': 0.9}
                        text: "Top 5"
                        halign: 'center'
                        on_release: root.set_popularity('5')
                    MDRaisedButton:
                        pos_hint: {'x': 0.9, 'center_y': 0.9}
                        text: "I dont care"
                        halign: 'center'
                        on_release: root.set_popularity('')

        MDSeparator:
            orientation: 'vertical'
            height: dp(1)


        BoxLayout:
            size_hint: (.27,1)
            orientation: 'vertical'
            padding: 10
            spacing: 10

            MDCard:
                orientation: 'vertical'
                MDLabel:
                    size_hint_y: .15
                    text: 'What are you looking for?'
                    font_style: 'Subhead'
                    halign: 'center'
                MDSeparator:
                    height: dp(1)
                MDLabel:
                    size_hint_y: .15
                    id: genre_verbatim
                    halign: 'center'
                    text: root.genre_verbatim
                MDLabel:
                    size_hint_y: .15
                    id: first_verbatim
                    halign: 'center'
                    text: root.first_switch_verbatim
                MDLabel:
                    size_hint_y: .15
                    id: rating_verbatim
                    halign: 'center'
                    text: rating_slider_percentage.text +' or higher'
                MDLabel:
                    size_hint_y: .15
                    id: pop_verbatim
                    halign: 'center'
                    text: 'also I dont care about the popularity'

            MDCard:
                size_hint_y: .24

                BoxLayout:
                    size_hint: (1,1)
                    padding: 10
                    orientation: 'vertical'

                    BoxLayout:
                        size_hint: (1, .5)
                        pos_hint:    {'center_x': 0.5, 'center_y': 0.5}

                        MDLabel:
                            id: sd
                            text: '480p'
                            halign: 'center'
                        MDLabel:
                            id: hd
                            text: '720p'
                            halign: 'center'
                        MDLabel:
                            id: hhd
                            text: '1080p'
                            halign: 'center'


                    BoxLayout:
                        size_hint: (1, .5)
                        pos_hint:    {'center_x': 0.5, 'center_y': 0.5}

                        MDCheckbox:
                            id: grp_chkbox_1
                            group: 'quality'
                            on_state: root.set_quality('480')
                        MDCheckbox:
                            id: grp_chkbox_2
                            active: 'true'
                            group: 'quality'
                            on_state: root.set_quality('720')
                        MDCheckbox:
                            id: grp_chkbox_3
                            group: 'quality'
                            on_state: root.set_quality('1080')


                    MDRaisedButton:
                        text: "Find Anime"
                        opposite_colors: True
                        on_release: root.set_anime_from_criterea()
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                    #MDRaisedButton:
                        #text: "Show me criterea Object"
                        #size_hint: None, None
                        #size: 4 * dp(48), dp(48)
                        #pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        #opposite_colors: True
                        #on_release: app.print_crit()
